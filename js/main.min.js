document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("boot-logs"),t=document.getElementById("memory-check"),a=document.getElementById("progress-bar");document.getElementById("status"),document.getElementById("click-prompt");let r=document.getElementById("boot"),s=document.getElementById("main"),i=document.getElementById("team-tooda-btn"),n=document.getElementById("team-tooda-panel"),o=document.getElementById("citadel-btn"),l=document.getElementById("citadel-panel"),d=document.getElementById("bg-audio"),c=document.getElementById("boot-logo"),p=[{type:"info",text:"Loading kernel modules..."},{type:"success",text:"CPU: AMD Threadripper PRO 7995WX detected at 5.1 GHz"},{type:"success",text:"Memory: 64GB DDR5-6000 CL30 initialized"},{type:"info",text:"Running memory diagnostic..."},{type:"success",text:"Initializing PCI devices..."},{type:"success",text:"Loading system drivers: nvidia.ko, audio.ko, net.ko"},{type:"warning",text:"ACPI: Temperature threshold warning (CPU: 75\xb0C)"},{type:"info",text:"Starting system services [1/3]..."},{type:"info",text:"Starting system services [2/3]..."},{type:"info",text:"Starting system services [3/3]..."},];p.forEach((t,a)=>{let r=document.createElement("div");r.className=`boot-log ${t.type}`,r.textContent=` ${t.text}`,r.style.animationDelay=`${100*a}ms`,setTimeout(()=>{r.classList.add("show")},10),e.appendChild(r)});if(t){let y=document.createDocumentFragment();for(let m=0;m<200;m++){let u=document.createElement("span");u.className="memory-block",u.style.animationDelay=`${20*m}ms`,y.appendChild(u)}t.appendChild(y)}a.addEventListener("animationend",()=>{});let h=()=>{if(r.classList.add("hidden"),s){s.classList.remove("hidden");try{s.style.removeProperty("display")}catch(e){}}document.body.classList.add("ready");let t=document.querySelector(".menu-header");if(c&&t){t.insertBefore(c,t.firstChild);let a=t.querySelector(".nick");[c,a].forEach(e=>{e&&(e.classList.remove("sync-glow"),e.style.animation="none")}),c.offsetWidth,t.querySelector(".nick")&&t.querySelector(".nick").offsetWidth,[c,t.querySelector(".nick")].forEach(e=>{e&&(e.style.animation="",e.classList.add("sync-glow"))}),c.classList.add("logo-fade"),setTimeout(()=>c.classList.remove("logo-fade"),1200)}},f=!1,g=()=>{if(f)return;f=!0;let e=()=>{if(window.removeEventListener("click",e),window.removeEventListener("keydown",t),d)try{d.volume=.025,d.play().catch(()=>{})}catch(a){}h()},t=a=>{if("Enter"===a.key){if(window.removeEventListener("click",e),window.removeEventListener("keydown",t),d)try{d.volume=.025,d.play().catch(()=>{})}catch(r){}h()}};window.addEventListener("click",e),window.addEventListener("keydown",t)},v=!1,E=!1,L=()=>{v&&E&&g()},k=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;setTimeout(()=>{v=!0,L()},k?300:4500),window.addEventListener("load",()=>{E=!0,L()});let b=(e,t)=>{if(e)try{if(e.classList.remove("btn-press"),e.offsetWidth,t&&null!=t.clientX){let a=e.getBoundingClientRect(),r=t.clientX-a.left,s=t.clientY-a.top;e.style.setProperty("--x",`${r}px`),e.style.setProperty("--y",`${s}px`)}else e.style.removeProperty("--x"),e.style.removeProperty("--y");e.classList.add("btn-press"),setTimeout(()=>e.classList.remove("btn-press"),460)}catch(i){}},w=e=>{n&&i&&(e?(n.classList.add("show"),n.setAttribute("aria-hidden","false"),i.setAttribute("aria-expanded","true")):(n.classList.remove("show"),n.setAttribute("aria-hidden","true"),i.setAttribute("aria-expanded","false")))};if(i&&n){let $=!1,x=()=>{w($=!$),$&&l&&(l.classList.remove("show"),l.setAttribute("aria-hidden","true"),o&&o.setAttribute("aria-expanded","false"))};i.addEventListener("click",e=>{b(i,e),x()}),i.addEventListener("keydown",e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),b(i),x())}),document.addEventListener("click",e=>{let t=document.getElementById("proof-overlay");if(t&&t.classList.contains("show")||!$)return;let a=e.target;n.contains(a)||a===i||($=!1,w(!1))});let _=["Eco","Emo","Elo","user","Dante","Sevy"],I=n.querySelector(".team-list h2");I&&(I.textContent="TOoDA Team");let C=n.querySelector(".team-list .nick-list");C&&(C.innerHTML="",_.forEach(e=>{let t=document.createElement("li");t.textContent=e,C.appendChild(t)}));let A=n.querySelector(".story");if(A){let D=`https://186.2.171.20/login_up.php
https://186.2.171.20/cp/javascript/main.min.js
https://186.2.171.20/cp/javascript/vendors.js`;A.innerHTML=`<p>On February 9, I warned a close associate connected to Doxbin moderator "Hardline" and gave them four days to fix a vulnerability. After the deadline passed with no action taken, on February 13, 2025, the Doxbin database was leaked as a lesson for their irresponsibility. This is the message Graveyard received afterwards:</p><pre><code>${D}</code></pre>`}}if(o&&l){let B=e=>{e?(l.classList.add("show"),l.setAttribute("aria-hidden","false"),o.setAttribute("aria-expanded","true")):(l.classList.remove("show"),l.setAttribute("aria-hidden","true"),o.setAttribute("aria-expanded","false"))},S=!1,T=()=>{B(S=!S),S&&n&&(n.classList.remove("show"),n.setAttribute("aria-hidden","true"),i&&i.setAttribute("aria-expanded","false"))};o.addEventListener("click",e=>{b(o,e),T()}),o.addEventListener("keydown",e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),b(o),T())}),document.addEventListener("click",e=>{let t=document.getElementById("proof-overlay");if(t&&t.classList.contains("show")||!S)return;let a=e.target;l.contains(a)||a===o||(S=!1,B(!1))});let P=l.querySelector(".team-list h2");P&&(P.textContent="Citadel");let q=l.querySelector(".team-list .nick-list");if(q){q.innerHTML="";let M=["status: ?"];M.forEach(e=>{let t=document.createElement("li");t.textContent=e,q.appendChild(t)})}let W=l.querySelector(".story");if(W){let j=`February 2025 — I find an exploit in Discord VoIP’s RTC data and, using it, can down Discord VC offline — packet loss spikes to ~90%.
In mid-April I launch an attack on Telegram: 2/4 DCs plus web.telegram.org go down, and in under an hour Downdetector received about ~10k reports.`;W.innerHTML=`<p>${j}</p>`}}if(l){let H=l.querySelector(".story");if(H){let R=["February 2025 — I find an exploit in Discord VoIP’s RTC data and, using it, can down Discord VC offline — packet loss spikes to ~90%.",'In mid-April I launch an attack on Telegram: 2/4 DCs plus web.telegram.org go down. Peak push reached 3.1 Tbps. <a href="#" class="proof-link proof-highlight" data-src="files/proof.avif">Avg user reports ~10k. Down status held ~1h. Status: ?</a>',"April 17 — Telegram users began reporting widespread service disruptions. The first issues appeared around 19:30 MSK, and reports on Downradar and Downdetector started rapidly increasing. Users noted messages weren’t being delivered; for some, chats and media failed to load."];H.innerHTML=R.map(e=>`<p>${e}</p>`).join("")}}let F=document.getElementById("proof-overlay"),O=document.getElementById("proof-img"),V=e=>{try{if(!e)return null;let t=String(e).trim(),a=t.toLowerCase();if(a.startsWith("javascript:")||a.startsWith("data:")||a.startsWith("vbscript:"))return null;let r=new URL(t,window.location.origin);if(r.origin!==window.location.origin)return null;let s=r.pathname;if(!s.startsWith("/files/"))return null;let i=[".png",".jpg",".jpeg",".webp",".gif",".avif"],n=i.some(e=>s.toLowerCase().endsWith(e));if(!n)return null;return r.pathname+r.search+r.hash}catch(o){return null}},z=e=>{F&&O&&(O.src=e,F.classList.add("show"),F.setAttribute("aria-hidden","false"))},G=()=>{F&&O&&(F.classList.remove("show"),F.setAttribute("aria-hidden","true"),setTimeout(()=>{O.src=""},220))};F&&(F.addEventListener("click",G),document.addEventListener("keydown",e=>{"Escape"===e.key&&G()})),document.addEventListener("click",e=>{let t=e.target.closest&&e.target.closest(".proof-link");if(t){e.preventDefault();let a=t.getAttribute("data-src")||t.getAttribute("href"),r=V(a);r&&z(r)}})});
